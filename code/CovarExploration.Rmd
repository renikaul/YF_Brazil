---
title: "Covar Exploration"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(rgdal)
library(raster)
library(rgeos)
```

#Population Density

```{r}
pop <- readRDS("../data_clean/demographic/populationLong.rds")

muniPoly <- readOGR("../data_clean", "BRAZpolygons") #read in spatial data (4 sperate files)

muniPoly <- spTransform(muniPoly, CRS("+proj=aea +lat_1=-5 +lat_2=-42 +lat_0=-32 +lon_0=-60 +x_0=0 +y_0=0 +ellps=aust_SA +units=m")) #change projection to special SAmerican thing, Albers Conic
muniArea <- gArea(muniPoly, byid=TRUE) #area for each muni
muniAreaKey<- cbind(muni.no=as.numeric(as.character(muniPoly@data$muni_no)), muniArea=(muniArea/1000^2))   #attach area to muniPoly@data
#row.names(muniAreaKey) <- NULL

#add area into pop 
pop1<- pop %>%
      merge(muniAreaKey,by="muni.no")  %>%
      mutate(densitypop = totPop/muniArea)


#looking into population zeros

tmp <- pop1[which(pop1$totPop==0),]

```